!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n,i=e();for(n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(self,function(){return(()=>{var n=[,(t,e,n)=>{"use strict";t.exports=i,t.exports.default=i;var r=n(2);function i(t,e){if(!(this instanceof i))return new i(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function d(t,e){m(t,0,t.children.length,e,t)}function m(t,e,n,i,o){(o=o||p(null)).minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var a,s=e;s<n;s++)a=t.children[s],u(o,t.leaf?i(a):a);return o}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function x(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function c(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function h(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(t,e,n,i,o){for(var a,s=[e,n];s.length;)(n=s.pop())-(e=s.pop())<=i||(a=e+Math.ceil((n-e)/i/2)*i,r(t,a,e,n,o),s.push(e,a,a,n))}i.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],i=this.toBBox;if(!h(t,e))return n;for(var o,a,s,r,l=[];e;){for(o=0,a=e.children.length;o<a;o++)s=e.children[o],h(t,r=e.leaf?i(s):s)&&(e.leaf?n.push(s):f(t,r)?this._all(s,n):l.push(s));e=l.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!h(t,e))return!1;for(var i,o,a,s,r=[];e;){for(i=0,o=e.children.length;i<o;i++)if(a=e.children[i],h(t,s=e.leaf?n(a):a)){if(e.leaf||f(t,s))return!0;r.push(a)}e=r.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var i,o=this._build(t.slice(),0,t.length-1,0);return this.data.children.length?this.data.height===o.height?this._splitRoot(this.data,o):(this.data.height<o.height&&(i=this.data,this.data=o,o=i),this._insert(o,this.data.height-o.height-1,!0)):this.data=o,this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=p([]),this},remove:function(t,e){if(!t)return this;for(var n,i,o,a,s=this.data,r=this.toBBox(t),l=[],h=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],n=h.pop(),a=!0),s.leaf&&-1!==(o=function(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}(t,s.children,e)))return s.children.splice(o,1),l.push(s),this._condense(l),this;a||s.leaf||!f(s,r)?i?(n++,s=i.children[n],a=!1):s=null:(l.push(s),h.push(n),s=(i=s).children[n=0])}return this},toBBox:function(t){return t},compareMinX:a,compareMinY:s,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,i){var o,a=n-e+1,s=this._maxEntries;if(a<=s)return d(o=p(t.slice(e,n+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,i-1))),(o=p([])).leaf=!1,o.height=i;var r,l,h,u,c=Math.ceil(a/s),f=c*Math.ceil(Math.sqrt(s));for(_(t,e,n,f,this.compareMinX),r=e;r<=n;r+=f)for(_(t,r,h=Math.min(r+f-1,n),c,this.compareMinY),l=r;l<=h;l+=c)u=Math.min(l+c-1,h),o.children.push(this._build(t,l,u,i-1));return d(o,this.toBBox),o},_chooseSubtree:function(t,e,n,i){for(var o,a,s,r,l,h,u,c,f;;){if(i.push(e),e.leaf||i.length-1===n)break;for(h=u=1/0,o=0,a=e.children.length;o<a;o++)l=x(s=e.children[o]),c=t,f=s,(c=(Math.max(f.maxX,c.maxX)-Math.min(f.minX,c.minX))*(Math.max(f.maxY,c.maxY)-Math.min(f.minY,c.minY))-l)<u?(u=c,h=l<h?l:h,r=s):c===u&&l<h&&(h=l,r=s);e=r||e.children[0]}return e},_insert:function(t,e,n){var i=this.toBBox,n=n?t:i(t),o=[],i=this._chooseSubtree(n,this.data,e,o);for(i.children.push(t),u(i,n);0<=e&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var n=t[e],i=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,i);i=this._chooseSplitIndex(n,o,i),i=p(n.children.splice(i,n.children.length-i));i.height=n.height,i.leaf=n.leaf,d(n,this.toBBox),d(i,this.toBBox),e?t[e-1].children.push(i):this._splitRoot(n,i)},_splitRoot:function(t,e){this.data=p([t,e]),this.data.height=t.height+1,this.data.leaf=!1,d(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){for(var i,o,a,s,r,l,h,u,c,f=a=1/0,d=e;d<=n-e;d++)i=m(t,0,d,this.toBBox),o=m(t,d,n,this.toBBox),r=i,l=o,c=u=h=void 0,h=Math.max(r.minX,l.minX),u=Math.max(r.minY,l.minY),c=Math.min(r.maxX,l.maxX),l=Math.min(r.maxY,l.maxY),u=Math.max(0,c-h)*Math.max(0,l-u),o=x(i)+x(o),u<f?(f=u,s=d,a=o<a?o:a):u===f&&o<a&&(a=o,s=d);return s},_chooseSplitAxis:function(t,e,n){var i=t.leaf?this.compareMinX:a,o=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,o)&&t.children.sort(i)},_allDistMargin:function(t,e,n,i){t.children.sort(i);for(var o,a=this.toBBox,s=m(t,0,e,a),r=m(t,n-e,n,a),l=c(s)+c(r),h=e;h<n-e;h++)o=t.children[h],u(s,t.leaf?a(o):o),l+=c(s);for(h=n-e-1;e<=h;h--)o=t.children[h],u(r,t.leaf?a(o):o),l+=c(r);return l},_adjustParentBBoxes:function(t,e,n){for(var i=n;0<=i;i--)u(e[i],t)},_condense:function(t){for(var e,n=t.length-1;0<=n;n--)0===t[n].children.length?0<n?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():d(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t){t.exports=function(){"use strict";function t(t,e,n,i,o){x(t,e,n||0,i||t.length-1,o||a)}function x(t,e,n,i,o){while(i>n){if(i-n>600){var a=i-n+1;var s=e-n+1;var r=Math.log(a);var l=.5*Math.exp(2*r/3);var h=.5*Math.sqrt(r*l*(a-l)/a)*(s-a/2<0?-1:1);var u=Math.max(n,Math.floor(e-s*l/a+h));var c=Math.min(i,Math.floor(e+(a-s)*l/a+h));x(t,e,u,c,o)}var f=t[e];var d=n;var m=i;p(t,n,e);if(o(t[i],f)>0)p(t,n,i);while(d<m){p(t,d,m);d++;m--;while(o(t[d],f)<0)d++;while(o(t[m],f)>0)m--}if(o(t[n],f)===0)p(t,n,m);else{m++;p(t,m,i)}if(m<=e)n=m+1;if(e<=m)i=m-1}}function p(t,e,n){var i=t[e];t[e]=t[n];t[n]=i}function a(t,e){return t<e?-1:t>e?1:0}return t}()}],i={};function o(t){var e=i[t];if(void 0!==e)return e.exports;e=i[t]={exports:{}};return n[t].call(e.exports,e,e.exports,o),e.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{"use strict";o.r(a),o.d(a,{CanvasLabel:()=>e,canvasLabel:()=>n});var t=o(1),l=o.n(t),e=L.CanvasLabel=L.Canvas.extend({options:{defaultLabelStyle:{offsetX:0,offsetY:0,scale:1,rotation:0,text:null,minZoom:null,maxZoom:null,collisionFlg:!0,center:null,zIndex:0,defaultHeight:20,font:"10px sans-serif",fillStyle:"rgba(0,0,0,1)",lineCap:"round",lineDash:[],lineDashOffset:0,lineJoin:"round",strokeStyle:"rgba(0,0,0,1)",textAlign:"center",textBaseline:"middle",lineWidth:1}},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd,click:this._executeListeners,mousemove:this._executeListeners,mousedown:this._executeListeners,mouseup:this._executeListeners};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},initialize:function(t){this._onClickListeners=[],this._onHoverListeners=[],this._onMouseDownListeners=[],this._onMouseUpListeners=[],t.defaultLabelStyle=t.defaultLabelStyle||{},t.defaultLabelStyle=L.extend({},this.options.defaultLabelStyle,t.defaultLabelStyle),L.Canvas.prototype.initialize.call(this,t)},_update:function(){this._latlngBounds=this._map.getBounds().pad(this.options.padding),L.Canvas.prototype._update.call(this)},_draw:function(){this._textBounds?this._textBounds.clear():this._textBounds=new(l());let e=[];var t,n,i=this._redrawBounds;this._ctx.save(),i&&(n=i.getSize(),this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,n.x,n.y),this._ctx.clip()),this._drawing=!0;for(var o=this._drawFirst;o;o=o.next)t=o.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&e.push(t);for(let t=0;t<e.length;t++)e[t]._updatePath();let a=e.filter(function(t){return t.options.labelStyle&&t.options.labelStyle.text}),s=a.filter(t=>{return 1!=(null!=t.options.labelStyle.collisionFlg?t.options.labelStyle:this.options.defaultLabelStyle).collisionFlg});s.sort((t,e)=>{return(t.options.labelStyle.zIndex||this.options.defaultLabelStyle.zIndex)-(e.options.labelStyle.zIndex||this.options.defaultLabelStyle.zIndex)}).forEach(t=>{this._updateText(this._ctx,t)});let r=a.filter(t=>{return 1==(null!=t.options.labelStyle.collisionFlg?t.options.labelStyle:this.options.defaultLabelStyle).collisionFlg});r.sort((t,e)=>{return-(t.options.labelStyle.zIndex||this.options.defaultLabelStyle.zIndex)+(e.options.labelStyle.zIndex||this.options.defaultLabelStyle.zIndex)}).forEach(t=>{this._updateText(this._ctx,t)}),this._drawing=!1,this._ctx.restore()},_updateText:function(o,a){if(a.options.labelStyle&&a.options.labelStyle.text){var s=L.latLng(a.options.labelStyle.center);if(!s)if(a.getLatLng)s=a.getLatLng();else{if(0==a._parts.length||0==a._parts[0].length)return;s=a.getCenter()}if(this._latlngBounds.contains(s)){let t=a.options.labelStyle;var r=L.extend({},this.options.defaultLabelStyle);"function"==typeof t&&(t=t(a));var l=L.extend(r,a.options.labelStyle);if(!(l.minZoom&&this._map.getZoom()<l.minZoom||l.maxZoom&&this._map.getZoom()>l.maxZoom)){o.save(),o.font=l.font,o.fillStyle=l.fillStyle,o.lineCap=l.lineCap,o.lineDash=l.lineDash,o.lineDashOffset=l.lineDashOffset,o.lineJoin=l.lineJoin,o.strokeStyle=l.strokeStyle,o.textAlign=l.textAlign,o.textBaseline=l.textBaseline,o.lineWidth=l.lineWidth;var h=l.offsetX,u=l.offsetY,r=this._map.latLngToLayerPoint(s),s=r.x+h,h=r.y+u;o.translate(s,h),1!=l.scale&&o.scale(l.scale,l.scale),0!=l.rotation&&o.rotate(l.rotation);r=o.measureText(l.text).width*l.scale,u=l.defaultHeight*l.scale;let t,e,n,i;"center"==l.textAlign?(t=s-r/2,n=s+r/2):"start"==l.textAlign||"left"==l.textAlign?(t=s,n=s+r):"end"==l.textAlign||"right"==l.textAlign?(t=s-r,n=s):console.error("textAlign的值必须是start，end，left，center，right中的一个！"),"middle"==l.textBaseline?(e=h-u/2,i=h+u/2):"top"==l.textBaseline||"hanging"==l.textBaseline?(e=h,i=h+u):"bottom"==l.textBaseline||"alphabetic"==l.textBaseline?(e=h-u,i=h):console.error("textBaseline的值必须是middle，top，hanging，bottom，alphabetic中的一个！");a={minX:t,minY:e,maxX:n,maxY:i,layer:a};1==l.collisionFlg&&this._textBounds.collides(a)||(o.strokeText(l.text,0,0),o.fillText(l.text,0,0),this._textBounds.insert(a)),o.restore()}}}},_executeListeners:function(e){var t,n;this._textBounds&&((n=(t=this).getTextByEvent(e))&&0<n.length?(t._map._container.style.cursor="pointer","click"===e.type&&t._onClickListeners.forEach(function(t){t(e,n)}),"mousemove"===e.type&&t._onHoverListeners.forEach(function(t){t(e,n)}),"mousedown"===e.type&&t._onMouseDownListeners.forEach(function(t){t(e,n)}),"mouseup"===e.type&&t._onMouseUpListeners.forEach(function(t){t(e,n)})):t._map._container.style.cursor="")},addOnClickListener:function(t){this._onClickListeners.push(t)},addOnHoverListener:function(t){this._onHoverListeners.push(t)},addOnMouseDownListener:function(t){this._onMouseDownListeners.push(t)},addOnMouseUpListener:function(t){this._onMouseUpListeners.push(t)},getTextByEvent(t){var e=t.layerPoint.x,t=t.layerPoint.y;return this._textBounds.search({minX:e,minY:t,maxX:e,maxY:t})}}),n=L.canvasLabel=function(t){return new L.CanvasLabel(t)}})(),a})()});